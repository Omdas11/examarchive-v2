<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ExamArchive</title>

  <link rel="stylesheet" href="css/common.css" />
  <link rel="stylesheet" href="css/avatar-popup.css">
  <link rel="stylesheet" href="css/header.css" />
  <link rel="stylesheet" href="css/footer.css">
  <link rel="stylesheet" href="css/profile-panel.css">
  <link rel="stylesheet" href="css/avatar.css">
  <link rel="stylesheet" href="css/home.css" />

  <!-- Accessibility and SEO -->
  <meta name="description" content="ExamArchive - A simple and community-driven archive of university question papers. Browse, upload, and preserve papers for everyone." />
  <meta name="theme-color" content="#d32f2f" />
</head>
<body>

  <!-- Skip to content link for accessibility -->
  <a href="#main-content" class="sr-only sr-only-focusable">Skip to main content</a>

  <!-- Header include -->
  <div id="night-layer"></div>
  <div id="header"></div>

  <main class="home" id="main-content">

    <!-- ================= HERO ================= -->
    <section class="hero" aria-label="Welcome section">
      <h1>ExamArchive</h1>
      <p>
        A simple and community-driven archive of university question papers.
        Browse, upload, and preserve papers for everyone.
      </p>

      <div class="hero-actions" role="navigation" aria-label="Main actions">
        <a href="browse.html" class="btn btn-red">Browse Papers</a>
        <a href="upload.html" class="btn">Upload Paper</a>
        <a href="about.html" class="btn">About Us</a>
      </div>
    </section>

    <!-- ================= UNIVERSAL SEARCH ================= -->
    <section class="home-search" aria-label="Search papers">
      <div class="search-wrapper">

        <div class="search-bar" role="search">
          <input
            type="text"
            class="search-input"
            placeholder="Search papers, repeated questions, notes, references…"
            aria-label="Universal search"
          />

          <button type="button" class="search-mode-btn" id="searchModeBtn" aria-haspopup="true" aria-expanded="false">
            Universal
          </button>

          <button type="button" class="btn btn-red search-btn" aria-label="Perform search">
            Search
          </button>
        </div>

        <div class="search-mode-dropdown" id="searchModeDropdown">
          <button data-mode="universal" class="active">Universal</button>
          <button data-mode="papers">Question Papers (PDF)</button>
          <button data-mode="rq">Repeated Questions</button>
          <button data-mode="notes">Notes</button>
          <button data-mode="refs">References</button>
        </div>

        <div class="search-results"></div>

      </div>
    </section>

    <!-- ================= QUICK ACCESS ================= -->
    <section class="quick-access" aria-label="Quick access navigation">
      <h2>Quick Access</h2>

      <div class="quick-grid" role="navigation" aria-label="Browse by category">
        <a class="quick-btn" href="browse.html" aria-label="Browse papers by subject">By Subject</a>
        <a class="quick-btn" href="browse.html" aria-label="Browse papers by university">By University</a>
        <a class="quick-btn" href="browse.html#year" aria-label="Browse papers by year">By Year</a>
        <a class="quick-btn" href="browse.html" aria-label="View repeated questions">Repeated Questions</a>
        <a class="quick-btn" href="browse.html" aria-label="Access notes and resources">Notes & Resources</a>
        <a class="quick-btn" href="browse.html" aria-label="View syllabus">Syllabus</a>
      </div>
    </section>

    <!-- ================= NOTICE BOARD ================= -->
    <section class="notice-board" aria-label="University notices">
      <h2>Notices & Updates</h2>
      <div class="notice-box" role="region" aria-live="polite">
        <p class="notice-empty">
          University notices and important academic updates will appear here.
        </p>
      </div>
    </section>

    <!-- ================= ACADEMIC CALENDAR ================= -->
    <section class="academic-calendar" aria-label="Academic calendar">
      <h2>Academic Calendar — 2026</h2>
      <div class="calendar-controls" style="display: flex; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;">
        <button class="toggle-btn active" data-cat="all" onclick="filterCalendar('all', this)">All</button>
        <button class="toggle-btn" data-cat="gazetted" onclick="filterCalendar('gazetted', this)">Gazetted</button>
        <button class="toggle-btn" data-cat="restricted" onclick="filterCalendar('restricted', this)">Restricted</button>
        <button class="toggle-btn" data-cat="other" onclick="filterCalendar('other', this)">Academic</button>
      </div>
      <div class="calendar-month-nav" style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-bottom: 1rem;">
        <button class="btn" id="calPrev" aria-label="Previous month">←</button>
        <strong id="calMonthLabel" style="min-width: 140px; text-align: center;"></strong>
        <button class="btn" id="calNext" aria-label="Next month">→</button>
      </div>
      <div id="calendarGrid" class="calendar-box" role="region" aria-live="polite">
        <p class="calendar-empty">Loading calendar...</p>
      </div>
      <div id="calendarEventDetail" style="margin-top: 1rem; display: none;"></div>
    </section>

  </main>

  <!-- Footer include -->
  <div id="footer"></div>

  <!-- ✅ GLOBAL PORTALS (MUST COME BEFORE JS) -->
  <div id="avatar-portal"></div>
  <div id="profile-panel-portal"></div>

  <!-- Scripts -->
  <!-- ⚡ BOOTSTRAP (MUST BE FIRST) -->
  <script src="js/bootstrap.js"></script>
  
  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.93.3"></script>
  
  <!-- ⚡ SUPABASE CLIENT SINGLETON (Phase 1.4 - MUST LOAD BEFORE MODULES) -->
  <script src="js/supabase-client.js"></script>
  <script src="js/core/debug.js"></script>
  
  <!-- ⚡ SUPABASE INITIALIZATION (Phase 9.2.4) -->
  <script type="module" src="js/app.module.js"></script>
  
  <!-- Classic Scripts (NO type="module") -->
  <!-- ⚡ AUTH UTILITIES (Phase 9.2) -->
  <script src="js/utils/supabase-wait.js"></script>
  <script src="js/auth-controller.js"></script>
  
  <script src="js/common.js"></script>
  <script src="js/avatar-utils.js"></script>
  <script src="js/utils/role-utils.js"></script>
  <script src="js/roles.js"></script>
  <script src="js/admin-auth.js"></script>
  <script src="js/profile-panel.js"></script>
  <script src="js/avatar-popup.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/home-search.js"></script>
  <script src="js/notices-calendar.js"></script>
</body>
</html>
